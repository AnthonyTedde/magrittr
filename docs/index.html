<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Forward-Pipe Operator for R • magrittr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- tidyverse --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html">magrittr</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/magrittr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="magrittr" class="section level1">


</div>
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The magrittr package offers a set of operators which promote semantics that will improve your code by</p>
<ul>
<li>structuring sequences of data operations left-to-right (as opposed to from the inside and out),</li>
<li>avoiding nested function calls,</li>
<li>minimizing the need for local variables and function definitions, and</li>
<li>making it easy to add steps anywhere in the sequence of operations.</li>
</ul>
<p>The operators pipe their left-hand side values forward into expressions that appear on the right-hand side, i.e. one can replace <code>f(x)</code> with <code>x %&gt;% f</code>, where <code>%&gt;%</code> is the (main) pipe-operator. When coupling several function calls with the pipe-operator, the benefit will become more apparent. Consider this pseudo example</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">the_data &lt;-
<span class="st">  </span><span class="kw">read.csv</span>(<span class="st">'/path/to/data/file.csv'</span>) %&gt;%
<span class="st">  </span><span class="kw">subset</span>(variable_a &gt;<span class="st"> </span>x) %&gt;%
<span class="st">  </span><span class="kw">transform</span>(<span class="dt">variable_c =</span> variable_a/variable_b) %&gt;%
<span class="st">  </span><span class="kw">head</span>(<span class="dv">100</span>)</code></pre></div>
<p>Four operations are performed to arrive at the desired data set, and they are written in a natural order: the same as the order of execution. Also, no temporary variables are needed. If yet another operation is required, it is straight-forward to add to the sequence of operations wherever it may be needed.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>To install the current development version use devtools:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"tidyverse/magrittr"</span>)</code></pre></div>
<p>To install the CRAN version:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"magrittr"</span>)</code></pre></div>
</div>
<div id="features" class="section level1">
<h1 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h1>
<div id="basic-piping" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-piping" class="anchor"></a>Basic piping:</h3>
<ul>
<li>
<code>x %&gt;% f</code> is equivalent to <code>f(x)</code>
</li>
<li>
<code>x %&gt;% f(y)</code> is equivalent to <code>f(x, y)</code>
</li>
<li>
<code>x %&gt;% f %&gt;% g %&gt;% h</code> is equivalent to <code>h(g(f(x)))</code>
</li>
</ul>
<p>Here, “equivalent” is not technically exact: evaluation is non-standard, and the left-hand side is evaluated before passed on to the right-hand side expression. However, in most cases this has no practical implication.</p>
</div>
<div id="the-argument-placeholder" class="section level3">
<h3 class="hasAnchor">
<a href="#the-argument-placeholder" class="anchor"></a>The argument placeholder</h3>
<ul>
<li>
<code>x %&gt;% f(y, .)</code> is equivalent to <code>f(y, x)</code>
</li>
<li>
<code>x %&gt;% f(y, z = .)</code> is equivalent to <code>f(y, z = x)</code>
</li>
</ul>
</div>
<div id="re-using-the-placeholder-for-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#re-using-the-placeholder-for-attributes" class="anchor"></a>Re-using the placeholder for attributes</h3>
<p>It is straight-forward to use the placeholder several times in a right-hand side expression. However, when the placeholder only appears in a nested expressions magrittr will still apply the first-argument rule. The reason is that in most cases this results more clean code.</p>
<p><code>x %&gt;% f(y = nrow(.), z = ncol(.))</code> is equivalent to <code>f(x, y = nrow(x), z = ncol(x))</code></p>
<p>The behavior can be overruled by enclosing the right-hand side in braces:</p>
<p><code>x %&gt;% {f(y = nrow(.), z = ncol(.))}</code> is equivalent to <code>f(y = nrow(x), z = ncol(x))</code></p>
</div>
<div id="more-advanced-right-hand-sides-and-lambdas" class="section level3">
<h3 class="hasAnchor">
<a href="#more-advanced-right-hand-sides-and-lambdas" class="anchor"></a>More advanced right-hand sides and lambdas</h3>
<p>To define a unary function on the fly in the pipeline, enclose the body of such function in braces, and refer to the argument as <code>.</code>, e.g.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">iris %&gt;%<span class="st"> </span>
<span class="st">  </span>{
    n &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">10</span>, <span class="dt">size =</span> <span class="dv">1</span>)
    H &lt;-<span class="st"> </span><span class="kw">head</span>(., n)
    T &lt;-<span class="st"> </span><span class="kw">tail</span>(., n)
    <span class="kw">rbind</span>(H, T)
  } %&gt;%
<span class="st">  </span>summary</code></pre></div>
</div>
<div id="building-unary-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#building-unary-functions" class="anchor"></a>Building (unary) functions</h3>
<p>Any pipeline starting with the <code>.</code> will return a function which can later be used to apply the pipeline to values. Building functions in magrittr is therefore similar to building other values.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">f &lt;-<span class="st"> </span>. %&gt;%<span class="st"> </span>cos %&gt;%<span class="st"> </span>sin 
<span class="co"># is equivalent to </span>
f &lt;-<span class="st"> </span>function(.) <span class="kw">sin</span>(<span class="kw">cos</span>(.)) </code></pre></div>
</div>
<div id="tee-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#tee-operations" class="anchor"></a>Tee operations</h3>
<p>Some right-hand sides are used for their side effect (e.g. plotting, printing to a file, etc) and it may be convenient to be able to subsequently continue the pipeline. The “tee” operator, <code>%T&gt;%</code> can be used for this purpose and works exactly like <code>%&gt;%</code>, except it returns the left-hand side value, rather than the potential result of the right-hand side operation:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">rnorm</span>(<span class="dv">200</span>) %&gt;%
<span class="kw">matrix</span>(<span class="dt">ncol =</span> <span class="dv">2</span>) %T&gt;%
plot %&gt;%<span class="st"> </span><span class="co"># plot usually does not return anything.</span>
colSums</code></pre></div>
</div>
<div id="pipe-with-exposition-of-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#pipe-with-exposition-of-variables" class="anchor"></a>Pipe with exposition of variables</h3>
<p>Many functions accept a data argument, e.g. <code>lm</code> and <code>aggregate</code>, which is very useful in a pipeline where data is first processed and then passed into such a function. There are also functions that do not have a data argument, for which it is useful to expose the variables in the data. This is done with the <code>%$%</code> operator:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">iris %&gt;%
<span class="st">  </span><span class="kw">subset</span>(Sepal.Length &gt;<span class="st"> </span><span class="kw">mean</span>(Sepal.Length)) %$%
<span class="st">  </span><span class="kw">cor</span>(Sepal.Length, Sepal.Width)

<span class="kw">data.frame</span>(<span class="dt">z =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>)) %$%
<span class="st">  </span><span class="kw">ts.plot</span>(z)</code></pre></div>
</div>
<div id="compound-assignment-pipe-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#compound-assignment-pipe-operations" class="anchor"></a>Compound assignment pipe operations</h3>
<p>There is also a pipe operator which can be used as shorthand notation in situations where the left-hand side is being “overwritten”:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">iris$Sepal.Length &lt;-<span class="st"> </span>
<span class="st">  </span>iris$Sepal.Length %&gt;%
<span class="st">  </span>sqrt</code></pre></div>
<p>To avoid the repetition of the left-hand side immediately after the assignment operator, use the <code>%&lt;&gt;%</code> operator:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">iris$Sepal.Length %&lt;&gt;%<span class="st"> </span>sqrt </code></pre></div>
<p>This operator works exactly like <code>%&gt;%</code>, except the pipeline assigns the result rather than returning it. It must be the first pipe operator in a longer chain.</p>
</div>
</div>
<div id="further-information" class="section level1">
<h1 class="hasAnchor">
<a href="#further-information" class="anchor"></a>Further information</h1>
<p>For more detail, see the package vignette</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">vignette</span>(<span class="st">"magrittr"</span>)</code></pre></div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=magrittr">https://​cran.r-project.org/​package=magrittr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/tidyverse/magrittr">https://​github.com/​tidyverse/​magrittr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/tidyverse/magrittr/issues">https://​github.com/​tidyverse/​magrittr/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Stefan Milton Bache <br><small class="roles"> Author, maintainer, copyright holder </small> </li>
<li>
<a href="http://hadley.nz">Hadley Wickham</a> <br><small class="roles"> Author </small> </li>
<li>
<a href="https://www.rstudio.com"><img src="http://tidyverse.org/rstudio-logo.svg" height="24"></a> <br><small class="roles"> Copyright holder, funder </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/tidyverse/magrittr"><img src="https://travis-ci.org/tidyverse/magrittr.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=magrittr"><img src="http://www.r-pkg.org/badges/version/magrittr" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>


      <footer><div class="tidyverse">
  <p>magrittr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by Stefan Milton Bache, <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="http://tidyverse.org/rstudio-logo.svg" height="24"></a>.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script></footer>
</div>

  </body>
</html>
